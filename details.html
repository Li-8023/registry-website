<!DOCTYPE html>
<html lang="zxx">

<head>
    <!--====== Required meta tags ======-->
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!--====== Title ======-->
    <title> 包详情 - Serverless Regsitry - Serverless package management platform </title>
    <!--====== Bootstrap css ======-->
    <link rel="stylesheet" href="static/css/bootstrap.min.css">
    <!--=== Owl-Carousel ===-->
    <link rel="stylesheet" href="static/css/owl.carousel.min.css">
    <!--====== Magnific ======-->
    <link rel="stylesheet" href="static/css/magnific-popup.css">
    <!--===nice-select===-->
    <link rel="stylesheet" href="static/css/nice-select.css">
    <!--====== Animate CSS ======-->
    <link rel="stylesheet" href="static/css/animate.min.css">
    <!--====== Font Awesome ======-->
    <link rel="stylesheet" href="static/css/font-awesome.min.css">
    <!--=== Toltip ===-->
    <link rel="stylesheet" href="static/css/envato-preview.css">
    <!--====== Magnifiq popup======-->
    <link rel="stylesheet" href="static/css/magnific-popup.css">
    <!--====== Main Css ======-->
    <link rel="stylesheet" href="static/css/style.css">
    <!--====== Responsive Css ======-->
    <link rel="stylesheet" href="static/css/responsive.css">
    <!--====== Markdown ======-->
    <link rel="stylesheet" href="static/css/github-markdown.css">
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.3/gh-fork-ribbon.min.css">
    <style>
        .download {
            margin-left: 20px;
            width: 120px;
            height: 34px;
            border: 1px solid rgba(4, 10, 41, 0.12);
            border-radius: 3px;
            color: white;
            line-height: 2.53;
            text-align: center;
            font-weight: 500;
            /*background: #fff;*/
        }
    </style>
</head>

<body>
<!--====== Preloader Start ======-->
<div id="preloader">
    <div class="loader-cubes">
        <div class="loader-cube1 loader-cube"></div>
        <div class="loader-cube2 loader-cube"></div>
        <div class="loader-cube4 loader-cube"></div>
        <div class="loader-cube3 loader-cube"></div>
    </div>
</div>
<!--====== Preloader End ======-->

<!--====== Header Part Start ======-->
<header class="header-one sticky-header">
    <div class="header-navigation" style="padding-top: 10px;padding-bottom: 7px">
        <div class="container-fluid d-flex align-items-center justify-content-between container-1470">
            <div class="header-left">
                <h1 href="index.html" style="color: black">Serverless Registry</h1>
            </div>
            <div class="header-right d-flex align-items-center justify-content-end">
                <div class="site-nav-menu">
                    <ul class="primary-menu">
                        <li>
                            <a class="nav-link" href="index.html">首页</a>
                        </li>
                        <li>
                            <a class="nav-link" href="application.html">应用</a>
                        </li>
                        <li class="current">
                            <a class="nav-link" href="component.html">组件</a>
                        </li>
                        <li>
                            <a class="nav-link" href="plugin.html">插件</a>
                        </li>
                        <li>
                            <a class="nav-link" href="https://github.com/Serverless-Devs/Serverless-Devs/blob/master/spec/zh/0.0.2/serverless_registry_model/readme.md" target="_blank">规范</a>
                        </li>
                        <li>
                            <a class="nav-link" href="faq.html">常见问题</a>
                        </li>
                    </ul>
                    <a href="#0" class="nav-close"><i class="fal fa-times"></i></a>
                </div>
                <div class="header-extra d-flex align-items-center">
                    <div class="search-widget">
                        <a href="#0" class="search-icon"><i class="fal fa-search"></i></a>

                        <div class="search-form">
                            <form action="search.html" method="GET">
                                <input type="search" placeholder="请输入要搜索的 Serverless Package 关键词" name="keyword">
                            </form>

                            <a href="#0" class="search-close"><i class="fal fa-times"></i></a>
                        </div>
                    </div>
                    <div class="offcanvas-widget d-none">
                        <div class="offcanvas-icon">
                            <span></span><span></span><span></span>
                        </div>
                    </div>
                    <div class="nav-toggler">
                        <span></span><span></span><span></span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
<!--====== Header Part End ======-->

<!--====== Banner Start ======-->
<section class="breadcrumb-area">
    <div class="container">
        <div class="content">
            <h2 class="breadd  wow fadeInUp" id="title"></h2>
            <ul class="breadcrumb-list  wow fadeInUp">
                <li><a href="index.html">首页 /</a></li>
                <li id="packagetype">包详情</li>
            </ul>
        </div>
    </div>
</section>
<!--====== Banner End ======-->

<section class="product-details">
    <div class="container">
        <div class="row">
            <div class="col-xl-8">
                <div class="detsils-box">
                    <div class="box-one">
                        <div class="thumb open-gallery  wow fadeInUp" id="desciption"></div>
                        <div id="quick"></div>
                    </div>
                    <div class="box-two">
                        <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
                            <li class="nav-item" role="presentation">
                                <a class="nav-link active" id="pills-description-tab" data-toggle="pill"
                                   href="#pills-description" role="tab" aria-controls="pills-description"
                                   aria-selected="true">帮助</a>
                            </li>
                            <li class="nav-item" role="presentation">
                                <a class="nav-link" id="pills-additional-imformation-tab" data-toggle="pill"
                                   href="#pills-additional-imformation" role="tab"
                                   aria-controls="pills-additional-imformation" aria-selected="false" id="sectitle">服务与权限</a>
                            </li>
                            <li class="nav-item" role="presentation" id="websiteproject">
                            </li>
                        </ul>
                        <div class="tab-content" id="pills-tabContent">
                            <div class="tab-pane fade show active" id="pills-description" role="tabpanel"
                                 aria-labelledby="pills-description-tab">
                                <div class="content wow fadeInUp markdown-body" id="mddata" style=""></div>
                            </div>
                            <div class="tab-pane fade" id="pills-additional-imformation" role="tabpanel"
                                 aria-labelledby="pills-additional-imformation-tab">
                                <div id="serviceList" class="markdown-body"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xl-4 col-lg-6">
                <div class="product-information-content  wow fadeInUp">
                    <div class="pi-content">
                        <img src="" alt="" id="usepic" width="200px">
                        <h4 id="usename"></h4>
                    </div>
                </div>
                <div class="product-information  wow fadeInUp">
                    <div class="left-box">
                        <p class="text">厂商支持:</p>
                    </div>
                    <div class="right-box" id="provider"></div>
                </div>
                <div class="product-information  wow fadeInUp">
                    <div class="left-box">
                        <p class="text">更新时间:</p>
                        <p class="text">最新版本:</p>
                    </div>
                    <div class="right-box">
                        <span id="rightupdatetime"></span>
                        <a href="" class="link version" id="rightlatestversion"></a>
                    </div>
                </div>
                <div class="product-information  wow fadeInUp">
                    <div class="left-box">
                        <p class="text">历史版本</p>
                    </div>
                    <div class="right-box" id="historyversion"></div>
                </div>
                <div class="product-information  wow fadeInUp">
                    <div class="left-box">
                        <p class="text">标签</p>
                    </div>
                    <div class="right-box" id="tagslist"></div>
                </div>
            </div>
        </div>
    </div>
</section>

<!--====== Footer Area START ======-->
<footer class="footer-area two">
    <div class="container">
        <div class="row justify-content-between">
            <div class="col-lg-4 col-md-6 wow fadeInUp" data-wow-delay="0.2s">
                <div class="footer-box one">
                    <div class="logo">
                        <h1 style="color: white">Serverless Regsitry</h1>
                    </div>
                    <p class="text">Serverless Regsitry 是 Serverless Devs 社区的衍生品，遵循 Serverless Devs Model 规范，为打造
                        Serverless 生态基础，繁荣 Serverless 开源生态而努力。正在为成为好用的 Serverless 领域的 NPM，Pypi ... 而努力。 </p>

                    <div class="social">
                        <a href="https://github.com/serverless-devs/serverless-devs"><i class="fab fa-github"></i></a>
                        <a href="https://gitee.com/serverless-devs/Serverless-Devs"><i class="fab fa-git"></i></a>
                        <a href="https://www.serverless-devs.com"><i class="fab fa-page4"></i></a>
                    </div>
                </div>
            </div>
            <div class="col-lg-2 col-md-6 wow fadeInUp" data-wow-delay="0.3s">
                <div class="footer-box two">
                    <h4 class="lasthead">相关资源</h4>
                    <div class="footer-list">
                        <ul>
                            <li><a href="about.html"> 关于我们 </a></li>
                            <li><a href="https://github.com/serverless-devs/serverless-devs"> Serverless Devs 仓库 </a>
                            </li>
                            <li><a href="https://github.com/Serverless-Devs/Serverless-Devs/blob/master/spec/readme.md">
                                SDM 规范文档 </a></li>
                            <li><a href="https://github.com/Serverless-Devs/Serverless-Devs/discussions"> Serverless
                                Devs 社区 </a></li>
                            <li>
                                <a href="https://github.com/Serverless-Devs/Serverless-Devs/blob/master/CONTRIBUTORS.md">
                                    贡献者列表 </a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="col-lg-2 col-md-6 wow fadeInUp" data-wow-delay="0.4s">
                <div class="footer-box three">
                    <h4 class="lasthead">钉钉交流群</h4>
                    <div class="footer-list">
                        <img src="https://serverless-article-picture.oss-cn-hangzhou.aliyuncs.com/1648814797378_20220401120637498673.png">
                    </div>
                </div>
            </div>
            <div class="col-lg-2 col-md-6 wow fadeInUp" data-wow-delay="0.5s">
                <div class="footer-box none">
                    <h4 class="lasthead">微信公众号</h4>
                    <div class="footer-list">
                        <img src="https://serverless-article-picture.oss-cn-hangzhou.aliyuncs.com/1648814758343_20220401120558862369.png">
                    </div>
                </div>
            </div>
        </div>
    </div>
</footer>
<div class="copyright two">
    <div class="container">
        <div class="row">
            <div class="col-12  wow fadeInUp text-center">
                <p class="text">Copyright &copy; 2022. Serverless Devs
                </p>
            </div>
        </div>
    </div>
</div>
<!--====== Footer Area END ======-->

<!--====== Back to top start ======-->
<div class="back-to-top">
    <a href="#0"> <i class="fas fa-arrow-up"></i> </a>
</div>
<!--====== Back to top start ======-->

<!--====== Jquery ======-->
<script src="static/js/jquery-3.6.0.min.js"></script>
<!--====== Bootstrap ======-->
<script src="static/js/bootstrap.bundle.min.js"></script>
<!--=== Owl-Carousel ===-->
<script src="static/js/owl.carousel.min.js"></script>
<!--====== Nice Select ======-->
<script src="static/js/jquery.nice-select.min.js"></script>
<!--====== tooltip ======-->
<script src="static/js/envato-preview.js"></script>
<!--====== Magnific ======-->
<script src="static/js/jquery.magnific-popup.min.js"></script>
<!--====== Wow ======-->
<script src="static/js/wow.min.js"></script>
<!--====== Main JS ======-->
<script src="static/js/main.js"></script>
<!--====== markdown ======-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/showdown/1.9.0/showdown.min.js"></script>
<script>

    function getQueryVariable(variable) {
        var query = window.location.search.substring(1);
        var vars = query.split("&");
        for (var i = 0; i < vars.length; i++) {
            var pair = vars[i].split("=");
            if (pair[0] == variable) {
                return pair[1];
            }
        }
        return (false);
    }

    function insertParam(key, value, sourceData = document.location.search.substr(1)) {
        key = escape(key);
        value = escape(value);
        var kvp = sourceData.split('&');
        if (kvp == '') {
            return '?' + key + '=' + value;
        } else {
            var i = kvp.length;
            var x;
            while (i--) {
                x = kvp[i].split('=');
                if (x[0] == key) {
                    x[1] = value;
                    kvp[i] = x.join('=');
                    break;
                }
            }
            if (i < 0) {
                kvp[kvp.length] = [key, value].join('=');
            }
            return kvp.join('&')
        }
    }

    function getDetail() {
        const xmlhttp = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject("Microsoft.XMLHTTP");
        xmlhttp.open("POST", 'http://registry.devsapp.cn/package/content', false);
        xmlhttp.onreadystatechange = function () {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                let tempData = JSON.parse(xmlhttp.responseText).Response
                document.getElementById('title').innerHTML = `${tempData.name}
                <h4><i class="fas fa-calendar"></i> ${tempData.create.split("T")[0]} / V${tempData.version} <a href="http://registry.devsapp.cn/simple/${tempData.name}/zipball/${tempData.version}" style="float: right;" class="download"><i class="fas fa-download">
                    下载 </i> </a></h4>`
                document.getElementById('packagetype').innerHTML = {
                    "component": "组件详情",
                    "application": "应用详情",
                    "plugin": "插件详情"
                }[tempData.type]
                document.getElementById('desciption').innerHTML = tempData.description
                document.getElementById('usepic').src = tempData.userInformation.avatar_url
                document.getElementById('usename').innerHTML = `<a href="${tempData.userInformation.html_url}" target="_blank">${tempData.userInformation.user}</a>`
                document.getElementById('rightupdatetime').innerHTML = tempData.create.split("T")[0]
                document.getElementById('rightlatestversion').innerHTML = tempData.version
                document.getElementById('rightlatestversion').href = `http://registry.devsapp.cn/simple/${tempData.name}/zipball/${tempData.version}`
                let tagsString = ''
                console.log(tempData.tags)
                for (let i = 0; i < tempData.tags.length; i++) {
                    tagsString = tagsString + `<span> ${tempData.tags[i]}  </span><br>`
                }
                document.getElementById('tagslist').innerHTML = tagsString
                let providerString = ''
                for (let i = 0; i < tempData.provider.length; i++) {
                    providerString = providerString + `<span> ${tempData.provider[i]}  </span><br>`
                }
                document.getElementById('provider').innerHTML = providerString
                const converter = new showdown.Converter();
                const html = converter.makeHtml(tempData.readme);
                document.getElementById("mddata").innerHTML = html;
                let serviceString = ''
                const serviceKeys = Object.keys(tempData.service)
                for (let i = 0; i < serviceKeys.length; i++) {
                    serviceString = serviceString + `<li> ${serviceKeys[i]}: ${tempData.service[serviceKeys[i]].Authorities.join(', ')}</li>`
                }
                document.getElementById('serviceList').innerHTML = serviceString
                let websiteproject = ''
                if(tempData.home){
                    websiteproject = `<a class="nav-link" id="pills-review-tab-new" target="_blank" href="${tempData.home}">项目网站</a>`
                }else{
                    websiteproject = `<a class="nav-link" id="pills-review-tab-new" style="pointer-events: none;"><s>项目网站</s></a>`
                }
                document.getElementById('websiteproject').innerHTML = websiteproject
                if(tempData.type=='application'){
                    document.getElementById('quick').innerHTML = `<br>可以通过以下命令快速体验该应用：<pre>s init ${tempData.name}</pre>`
                }
            }
        }
        xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        let data = `name=${getQueryVariable('name')}`
        xmlhttp.send(data);
    }

    function getHistoryVersions() {
        const xmlhttp = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject("Microsoft.XMLHTTP");
        xmlhttp.open("GET", `http://registry.devsapp.cn/simple/${getQueryVariable('name')}/releases`, false);
        xmlhttp.onreadystatechange = function () {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                let tempData = JSON.parse(xmlhttp.responseText).Response
                let tempString = ''
                for (let i = 0; i < tempData.length; i++) {
                    tempString = tempString + `<a href="http://registry.devsapp.cn/simple/${getQueryVariable('name')}/zipball/${tempData[i].tag_name}" target="_blank" class="link"> V${tempData[i].tag_name} (${tempData[i].created_at.split("T")[0]}) </a><br>`
                }
                document.getElementById('historyversion').innerHTML = tempString
            }
        }
        xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        xmlhttp.send();
    }

    getDetail()
    getHistoryVersions()

</script>
</body>

</html>